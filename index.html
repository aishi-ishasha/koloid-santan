<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Koloid Santan - Eksplorasi Interaktif</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #fef5e7 0%, #fdebd0 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        
        h1 {
            color: #5d4e37;
            margin-bottom: 10px;
            text-align: center;
        }
        
        .subtitle {
            color: #8b7355;
            margin-bottom: 20px;
            text-align: center;
            font-size: 18px;
        }
        
        #canvas-container {
            position: relative;
            background: white;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        canvas {
            display: block;
            border-radius: 10px;
        }
        
        .info-box {
            background: #e8f4f8;
            border-left: 4px solid #4a90e2;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
            max-width: 600px;
        }
        
        .info-box h3 {
            margin-top: 0;
            color: #2c5aa0;
        }
        
        .label {
            position: absolute;
            background: rgba(139, 115, 241, 0.9);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            user-select: none;
        }
        
        .label:hover {
            transform: scale(1.05);
            background: rgba(139, 115, 241, 1);
        }
        
        #label-medium {
            top: 100px;
            left: 40px;
        }
        
        #label-dispersed {
            bottom: 100px;
            left: 40px;
        }
    </style>
</head>
<body>
    <h1>ðŸ¥¥ Eksplorasi Koloid: Santan ðŸ¥¥</h1>
    <p class="subtitle">Klik label biru untuk mempelajari komponen koloid!</p>
    
    <div id="canvas-container">
        <canvas id="colloidCanvas" width="600" height="500"></canvas>
        <div class="label" id="label-medium">Medium pendispersi: Air</div>
        <div class="label" id="label-dispersed">Fase terdispersi: minyak</div>
    </div>
    
    <div class="info-box">
        <h3>ðŸ’¡ Apa itu Koloid?</h3>
        <p><strong>Santan adalah contoh koloid jenis "emulsi cair"</strong> - berupa campuran antara minyak kelapa (fase terdispersi: cairan) di dalam medium pendispersi berupa air (medium pendispersi: cairan).</p>
        <p>Partikel minyak berukuran 1-1000 nanometer tersebar merata dalam air, sehingga tidak dapat dipisahkan dengan penyaringan biasa.</p>
        <p><strong>Ciri-ciri koloid santan:</strong></p>
        <ul>
            <li>Tampak keruh/tidak jernih</li>
            <li>Partikel minyak tersuspensi dalam air</li>
            <li>Stabil dalam jangka waktu tertentu</li>
        </ul>
    </div>

    <script>
        const canvas = document.getElementById('colloidCanvas');
        const ctx = canvas.getContext('2d');
        
        // State management
        let activeView = null; // 'medium' or 'dispersed'
        
        // Particle system
        const particles = [];
        const particleCount = 450;
        
        // Create particles
        for (let i = 0; i < particleCount; i++) {
            particles.push({
                x: Math.random() * 400 + 100,
                y: Math.random() * 320 + 90,
                size: Math.random() * 3 + 2,
                speedX: (Math.random() - 0.5) * 0.3,
                speedY: (Math.random() - 0.5) * 0.3,
                color: `rgba(255, 220, ${Math.floor(Math.random() * 50 + 50)}, 0.8)`
            });
        }
        
        // Click handlers for labels
        document.getElementById('label-medium').addEventListener('click', () => {
            activeView = activeView === 'medium' ? null : 'medium';
        });
        
        document.getElementById('label-dispersed').addEventListener('click', () => {
            activeView = activeView === 'dispersed' ? null : 'dispersed';
        });
        
        function drawJar() {
            // Jar body
            ctx.fillStyle = '#e8f4fc';
            ctx.beginPath();
            ctx.moveTo(200, 80);
            ctx.lineTo(150, 100);
            ctx.lineTo(150, 380);
            ctx.quadraticCurveTo(150, 400, 170, 410);
            ctx.lineTo(430, 410);
            ctx.quadraticCurveTo(450, 400, 450, 380);
            ctx.lineTo(450, 100);
            ctx.lineTo(400, 80);
            ctx.closePath();
            ctx.fill();
            
            // Jar outline
            ctx.strokeStyle = '#3d4854';
            ctx.lineWidth = 4;
            ctx.stroke();
            
            // Coconut milk
            ctx.fillStyle = '#f5f5dc';
            ctx.beginPath();
            ctx.moveTo(152, 100);
            ctx.lineTo(152, 380);
            ctx.quadraticCurveTo(152, 398, 170, 408);
            ctx.lineTo(430, 408);
            ctx.quadraticCurveTo(448, 398, 448, 380);
            ctx.lineTo(448, 100);
            ctx.closePath();
            ctx.fill();
            
            // Milk surface
            ctx.fillStyle = '#e8e8d0';
            ctx.beginPath();
            ctx.ellipse(300, 100, 148, 15, 0, 0, Math.PI * 2);
            ctx.fill();
            ctx.strokeStyle = '#3d4854';
            ctx.lineWidth = 3;
            ctx.stroke();
            
            // Lid
            ctx.fillStyle = '#b8d4f0';
            ctx.beginPath();
            ctx.moveTo(180, 70);
            ctx.lineTo(200, 80);
            ctx.lineTo(400, 80);
            ctx.lineTo(420, 70);
            ctx.closePath();
            ctx.fill();
            ctx.strokeStyle = '#3d4854';
            ctx.lineWidth = 4;
            ctx.stroke();
            
            // Lid top
            ctx.fillStyle = '#d0e8ff';
            ctx.fillRect(180, 65, 240, 5);
            ctx.strokeRect(180, 65, 240, 5);
            
            // Handle
            ctx.strokeStyle = '#3d4854';
            ctx.lineWidth = 8;
            ctx.beginPath();
            ctx.arc(480, 180, 35, -Math.PI/2, Math.PI/2);
            ctx.stroke();
            
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(450, 145);
            ctx.lineTo(480, 145);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(450, 215);
            ctx.lineTo(480, 215);
            ctx.stroke();
        }
        
        function updateParticles() {
            particles.forEach(particle => {
                // Update position
                particle.x += particle.speedX;
                particle.y += particle.speedY;
                
                // Bounce off jar walls (simplified boundaries)
                if (particle.x < 155 || particle.x > 445) particle.speedX *= -1;
                if (particle.y < 105 || particle.y > 405) particle.speedY *= -1;
            });
        }
        
        function drawMediumView() {
            // Draw line from label to liquid
            ctx.strokeStyle = '#8b73f1';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(180, 140);
            ctx.lineTo(250, 200);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Draw text box
            ctx.fillStyle = 'rgba(139, 115, 241, 0.95)';
            ctx.strokeStyle = '#6b52c1';
            ctx.lineWidth = 2;
            
            // Rounded rectangle for text box
            const boxX = 250;
            const boxY = 180;
            const boxWidth = 120;
            const boxHeight = 50;
            const radius = 10;
            
            ctx.beginPath();
            ctx.moveTo(boxX + radius, boxY);
            ctx.lineTo(boxX + boxWidth - radius, boxY);
            ctx.arcTo(boxX + boxWidth, boxY, boxX + boxWidth, boxY + radius, radius);
            ctx.lineTo(boxX + boxWidth, boxY + boxHeight - radius);
            ctx.arcTo(boxX + boxWidth, boxY + boxHeight, boxX + boxWidth - radius, boxY + boxHeight, radius);
            ctx.lineTo(boxX + radius, boxY + boxHeight);
            ctx.arcTo(boxX, boxY + boxHeight, boxX, boxY + boxHeight - radius, radius);
            ctx.lineTo(boxX, boxY + radius);
            ctx.arcTo(boxX, boxY, boxX + radius, boxY, radius);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Text
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Cairan:', boxX + boxWidth/2, boxY + 25);
            ctx.font = '20px Arial';
            ctx.fillText('Air', boxX + boxWidth/2, boxY + 45);
        }
        
        function drawDispersedView() {
            // Draw magnifying glass at a fixed position
            const magX = 350;
            const magY = 250;
            const magnifierRadius = 70;
            
            // Draw line from label to magnifying glass
            ctx.strokeStyle = '#8b73f1';
            ctx.lineWidth = 3;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(180, 380);
            ctx.lineTo(magX - magnifierRadius - 10, magY + 20);
            ctx.stroke();
            ctx.setLineDash([]);
            
            // Draw cream background circle first (before clipping)
            ctx.fillStyle = '#f5f5dc';
            ctx.beginPath();
            ctx.arc(magX, magY, magnifierRadius, 0, Math.PI * 2);
            ctx.fill();
            
            // Save context
            ctx.save();
            
            // Create clipping region for magnified area
            ctx.beginPath();
            ctx.arc(magX, magY, magnifierRadius, 0, Math.PI * 2);
            ctx.clip();
            
            // Draw magnified particles
            particles.forEach(particle => {
                const dx = particle.x - magX;
                const dy = particle.y - magY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < magnifierRadius / 2.5) {
                    // Magnified position
                    const magnification = 3;
                    const magParticleX = magX + dx * magnification;
                    const magParticleY = magY + dy * magnification;
                    
                    // Draw magnified particle
                    ctx.fillStyle = particle.color;
                    ctx.beginPath();
                    ctx.arc(magParticleX, magParticleY, particle.size * magnification, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Draw particle detail (inner circle)
                    ctx.fillStyle = 'rgba(255, 255, 255, 0.4)';
                    ctx.beginPath();
                    ctx.arc(magParticleX - particle.size * 0.5, magParticleY - particle.size * 0.5, 
                           particle.size * magnification * 0.3, 0, Math.PI * 2);
                    ctx.fill();
                }
            });
            
            // Restore context
            ctx.restore();
            
            // Draw magnifying glass rim
            ctx.strokeStyle = '#5d4e37';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.arc(magX, magY, magnifierRadius, 0, Math.PI * 2);
            ctx.stroke();
            
            // Handle
            const handleAngle = Math.PI / 4;
            const handleX = magX + Math.cos(handleAngle) * magnifierRadius;
            const handleY = magY + Math.sin(handleAngle) * magnifierRadius;
            const handleLength = 70;
            const handleEndX = handleX + Math.cos(handleAngle) * handleLength;
            const handleEndY = handleY + Math.sin(handleAngle) * handleLength;
            
            ctx.strokeStyle = '#5d4e37';
            ctx.lineWidth = 8;
            ctx.lineCap = 'round';
            ctx.beginPath();
            ctx.moveTo(handleX, handleY);
            ctx.lineTo(handleEndX, handleEndY);
            ctx.stroke();
            
            // Draw text box below magnifying glass
            ctx.fillStyle = 'rgba(139, 115, 241, 0.95)';
            ctx.strokeStyle = '#6b52c1';
            ctx.lineWidth = 2;
            
            // Rounded rectangle for text box
            const boxX = magX - 60;
            const boxY = magY + magnifierRadius + 20;
            const boxWidth = 120;
            const boxHeight = 50;
            const radius = 10;
            
            ctx.beginPath();
            ctx.moveTo(boxX + radius, boxY);
            ctx.lineTo(boxX + boxWidth - radius, boxY);
            ctx.arcTo(boxX + boxWidth, boxY, boxX + boxWidth, boxY + radius, radius);
            ctx.lineTo(boxX + boxWidth, boxY + boxHeight - radius);
            ctx.arcTo(boxX + boxWidth, boxY + boxHeight, boxX + boxWidth - radius, boxY + boxHeight, radius);
            ctx.lineTo(boxX + radius, boxY + boxHeight);
            ctx.arcTo(boxX, boxY + boxHeight, boxX, boxY + boxHeight - radius, radius);
            ctx.lineTo(boxX, boxY + radius);
            ctx.arcTo(boxX, boxY, boxX + radius, boxY, radius);
            ctx.closePath();
            ctx.fill();
            ctx.stroke();
            
            // Text
            ctx.fillStyle = 'white';
            ctx.font = 'bold 16px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('Cairan:', boxX + boxWidth/2, boxY + 25);
            ctx.font = '20px Arial';
            ctx.fillText('Minyak', boxX + boxWidth/2, boxY + 45);
        }
        
        function animate() {
            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw scene
            drawJar();
            updateParticles();
            
            // Draw active view
            if (activeView === 'medium') {
                drawMediumView();
            } else if (activeView === 'dispersed') {
                drawDispersedView();
            }
            
            requestAnimationFrame(animate);
        }
        
        // Start animation
        animate();
    </script>
</body>
</html>
